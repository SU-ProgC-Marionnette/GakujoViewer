# Gitの概念

この文章は以下に示すGitやGitHubの解説ページを要約したものです。

- [Gitの基本](https://git-scm.com/book/ja/v2/%E4%BD%BF%E3%81%84%E5%A7%8B%E3%82%81%E3%82%8B-Git%E3%81%AE%E5%9F%BA%E6%9C%AC)
- [GitHubフロー](https://docs.github.com/ja/get-started/quickstart/github-flow)

## 概念

Gitはバージョン管理システムです。
プログラムの変更点を[コミット](#コミット)と呼ばれる単位で管理することで、開発を容易にすることができます。

## 領域

Gitでは、ファイル群を[リポジトリ](#リポジトリ)によって管理します。
リポジトリの中には[ワーキングディレクトリ](#ワーキングディレクトリ)と[ステージングエリア](#ステージングエリア)と呼ばれる領域があります。

ワーキングディレクトリは、今まさに見ることができるディレクトリの中身です。
ワーキングディレクトリに加えた変更点をステージングエリアに動かす([ステージ](#ステージ)する)ことで、[コミット](#コミット)する準備ができます。

このことを分かりやすく図にすると次のようになります。
![Git areas](https://git-scm.com/book/en/v2/images/areas.png)
(<https://git-scm.com/book/ja/v2/%E4%BD%BF%E3%81%84%E5%A7%8B%E3%82%81%E3%82%8B-Git%E3%81%AE%E5%9F%BA%E6%9C%AC>から引用)

また、この図を実際に操作するコマンドで表した図もあります。

ローカルリポジトリとリモートリポジトリの違いは[リポジトリ](#リポジトリ)を参照してください。
![Git areas with commands](https://khid.net/wp-content/uploads/2020/05/git_staging_area_repo_command-768x433.png)
(<https://khid.net/2020/05/git-working-directory-staging-area-repo-command/>から引用)

## 用語

### リポジトリ

> Repository

リモートリポジトリはGitHubなどのサーバ上にあるリポジトリのことです。
基本的にはこれを直接編集することはなく、ローカルリポジトリで変更したものを反映することで変更します。

ローカルリポジトリは`git clone`、`git pull`などでダウンロードした、ローカルにあるリポジトリのことです。ローカルでの変更は、`git push`などによりアップロードするまでリモートリポジトリには反映されません。

ローカルリポジトリだけを開発中に編集することで、コードの破壊を防ぐことができます。

### ブランチ

> Branch

ブランチ機能はリポジトリの中で、次の図のように複数の状態に分岐させる機能です。

図中の`Cn`は[コミット](#コミット)を示しています。`master`、`iss53`ブランチが指しているコミットは矢印で示しています。

(すなわち、Gitのリポジトリはコミットが連結リストのように繋がっていて、ブランチはその中の1つを指しているという構造になっています。)
![branch](https://git-scm.com/book/en/v2/images/basic-merging-2.png)
(<https://git-scm.com/book/ja/v2/Git-%E3%81%AE%E3%83%96%E3%83%A9%E3%83%B3%E3%83%81%E6%A9%9F%E8%83%BD-%E3%83%96%E3%83%A9%E3%83%B3%E3%83%81%E3%81%A8%E3%83%9E%E3%83%BC%E3%82%B8%E3%81%AE%E5%9F%BA%E6%9C%AC>から引用)

新しい機能の実装時などに新規ブランチを作ってそこで作業することで、本流のコードの破壊を防ぐことができます。

### ステージ

> Stage

ステージは、[ワーキングディレクトリ](#領域)の変更点を[ステージングエリア](#領域)に移動する操作のことです。

ステージ後に[コミット](#コミット)することで、ステージングエリアに移動された変更点がコミットされます。

### コミット

> Commit

コミットは、変更点の単位のこと、あるいはそれを作成する操作のことです。

コミットは変更点の最小単位になるので、大きすぎず小さすぎない単位で作成する必要があります。
[commitの粒度](https://qiita.com/chihiro/items/04482caebc702e75e84d)も参考にしてください。

### プルリクエスト

> Pull Request, PR

プルリクエストは、ある[ブランチ](#ブランチ)での変更を別のブランチに反映させることを要求することです。

基本的には、新たな機能の実装をまとめたブランチを、本流のブランチに反映することを要求するために使います。

[リモートリポジトリ](#リポジトリ)を変更する際は、コードの破壊を防ぐために直接[コミット](#コミット)するのではなく、プルリクエストを送り、第三者の目が通ったあとで反映させることが多いです。
